---
description: TCP 1433
---

# MSSQL

### Important Default MSSQL Databases

| Default System Database | Description                                                                                                                                                                                            |
| ----------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `master`                | Tracks all system information for an SQL server instance                                                                                                                                               |
| `model`                 | Template database that acts as a structure for every new database created. Any setting changed in the model database will be reflected in any new database created after changes to the model database |
| `msdb`                  | The SQL Server Agent uses this database to schedule jobs & alerts                                                                                                                                      |
| `tempdb`                | Stores temporary objects                                                                                                                                                                               |
| `resource`              | Read-only database containing system objects included with SQL server                                                                                                                                  |

***

### MSSQL Server Commands

| Command                                              | Description                                         |
| ---------------------------------------------------- | --------------------------------------------------- |
| `show databases;`                                    | Show all databases.                                 |
| `use <database>;`                                    | Select one of the existing databases.               |
| `show tables;`                                       | Show all available tables in the selected database. |
| `show columns from <table>;`                         | Show all columns in the selected database.          |
| `select * from <table>;`                             | Show everything in the desired table.               |
| `select * from <table> where <column> = "<string>";` | Search for needed `string` in the desired table     |

***

### NMAP

{% code title="Default Script Scan" overflow="wrap" %}
```sh
sudo nmap --script ms-sql-info,ms-sql-empty-password,ms-sql-xp-cmdshell,ms-sql-config,ms-sql-ntlm-info,ms-sql-tables,ms-sql-hasdbaccess,ms-sql-dac,ms-sql-dump-hashes --script-args mssql.instance-port=1433,mssql.username=USERNAME,mssql.password=PASSWORD,mssql.instance-name=MSSQLSERVER -sV -p 1433 TARGET_IP
```
{% endcode %}

***

### Metasploit

```sh
use auxiliary/scanner/mssql/mssql_ping
```

### Impacket - mssqlclient.py

```sh
python3 /usr/local/bin/mssqlclient.py USERNAME@TARGET_IP -windows-auth
```
