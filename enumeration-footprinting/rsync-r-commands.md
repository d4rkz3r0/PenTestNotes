---
description: Rsync - TCP/UDP 873
---

# Rsync/R-commands

## Enumeration

***

#### Version Detection

```sh
sudo nmap -sV -p 873 TARGET_IP
```

#### Share Enumeration (NetCat)

```sh
nc -nv 127.0.0.1 873
```

#### Specific Share File Enumeration

```sh
rsync -av --list-only rsync://127.0.0.1/SHARE_NAME
```

#### Download All Files in Share (No SSH)

```sh
rsync -av rsync://127.0.0.1/SHARE_NAME
```

#### Additional rsync flags

* \-e ssh\
  When SSH is used as the backhaul\
  \-p PORT\_NUM\
  When a nonstandard port number is in use for SSH backhaul

***

## R-Command Suite

***

### Global Config

```sh
cat /etc/hosts.equiv
```

### Per User Config

```sh
cat /etc/.rhosts
```

### R-Command Utils/General Info

| Command  | Service Daemon | Port | Transport Protocol | Description                                                                                                                                                                                                                                                                |
| -------- | -------------- | ---- | ------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `rcp`    | `rshd`         | 514  | TCP                | Copy a file or directory bidirectionally from the local system to the remote system (or vice versa) or from one remote system to another. It works like the `cp` command on Linux but provides `no warning to the user for overwriting existing files on a system`.        |
| `rsh`    | `rshd`         | 514  | TCP                | Opens a shell on a remote machine without a login procedure. Relies upon the trusted entries in the `/etc/hosts.equiv` and `.rhosts` files for validation.                                                                                                                 |
| `rexec`  | `rexecd`       | 512  | TCP                | Enables a user to run shell commands on a remote machine. Requires authentication through the use of a `username` and `password` through an unencrypted network socket. Authentication is overridden by the trusted entries in the `/etc/hosts.equiv` and `.rhosts` files. |
| `rlogin` | `rlogind`      | 513  | TCP                | Enables a user to log in to a remote host over the network. It works similarly to `telnet` but can only connect to Unix-like hosts. Authentication is overridden by the trusted entries in the `/etc/hosts.equiv` and `.rhosts` files.                                     |

## Enumeration

***

### Version Detection

```sh
sudo nmap -sV -p 512,513,514 TARGET_IP
```

***

### Native Rlogin client

#### Connection

```sh
rlogin TARGET_IP -l USERNAME
```

#### Enumerate other users

```sh
rwho
```

#### Enumerate other users (Alternate Method)

```sh
rusers -al TARGET_IP
```

***
