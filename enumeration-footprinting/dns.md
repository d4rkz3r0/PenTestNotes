---
description: Domain Name System - UDP Port 53
---

# DNS

## General Info

### Record Types

| DNS Record | Description                                                                                                                                                                                                                                       |
| ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `A`        | Returns an IPv4 address of the requested domain as a result.                                                                                                                                                                                      |
| `AAAA`     | Returns an IPv6 address of the requested domain.                                                                                                                                                                                                  |
| `MX`       | Returns the responsible mail servers as a result.                                                                                                                                                                                                 |
| `NS`       | Returns the DNS servers (nameservers) of the domain.                                                                                                                                                                                              |
| `TXT`      | This record can contain various information. The all-rounder can be used, e.g., to validate the Google Search Console or validate SSL certificates. In addition, SPF and DMARC entries are set to validate mail traffic and protect it from spam. |
| `CNAME`    | This record serves as an alias. If the domain www.hackthebox.eu should point to the same IP, and we create an A record for one and a CNAME record for the other.                                                                                  |
| `PTR`      | The PTR record works the other way around (reverse lookup). It converts IP addresses into valid domain names.                                                                                                                                     |
| `SOA`      | Provides information about the corresponding DNS zone and email address of the administrative contact.                                                                                                                                            |

***

## DIG

{% code title="NS Query" %}
```sh
dig ns TARGET_DOMAIN_NAME @DNS_SERVER_IP_TO_USE
```
{% endcode %}

{% code title="Show All Record Types" %}
```sh
dig any TARGET_DOMAIN_NAME @DNS_SERVER_IP_TO_USE
```
{% endcode %}

{% code title="Zone Transfer" %}
```sh
dig axfr TARGET_DOMAIN_NAME @DNS_SERVER_IP_TO_USE
```
{% endcode %}

Search for SOA record, usually labeled internal and attempt Internal Zone Transfer

{% code title="Zone Transfer - Internal" %}
```sh
dig axfr INTERNAL/SOA.TARGET_DOMAIN_NAME @DNS_SERVER_IP_TO_USE
```
{% endcode %}

#### SubDomain BruteForcing using DIG w/ SecList

{% code fullWidth="false" %}
```sh
for sub in $(cat /opt/useful/SecLists/Discovery/DNS/subdomains-top1million-110000.txt);do dig $sub.TARGET_DOMAIN_NAME @DNS_SERVER_IP_TO_USE | grep -v ';\|SOA' | sed -r '/^\s*$/d' | grep $sub | tee -a subdomains.txt;done
```
{% endcode %}

SecLists Source:\
[https://github.com/danielmiessler/SecLists/blob/master/Discovery/DNS/subdomains-top1million-5000.txt](https://github.com/danielmiessler/SecLists/blob/master/Discovery/DNS/subdomains-top1million-5000.txt)

***

## DNSenum

Note: Requires Word/SecList

{% code title="Enumeration and SubDomain BruteForce" overflow="wrap" %}
```sh
dnsenum --dnsserver DNS_SERVER_IP_TO_USE --enum -p 0 -s 0 -o subdomains.txt -f /opt/useful/SecLists/Discovery/DNS/subdomains-top1million-110000.txt TARGET_DOMAIN_NAME 
```
{% endcode %}
